<!doctype html>
<html lang="zh-Hans" dir="ltr" class="blog-wrapper blog-tags-post-list-page plugin-blog plugin-id-default">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.1">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="zyw RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="zyw Atom Feed"><title data-rh="true">2 篇博文 含有标签「Nginx」 | zyw</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://your-docusaurus-test-site.com/blog/tags/nginx"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" property="og:title" content="2 篇博文 含有标签「Nginx」 | zyw"><meta data-rh="true" name="docusaurus_tag" content="blog_tags_posts"><meta data-rh="true" name="docsearch:docusaurus_tag" content="blog_tags_posts"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://your-docusaurus-test-site.com/blog/tags/nginx"><link data-rh="true" rel="alternate" href="https://your-docusaurus-test-site.com/blog/tags/nginx" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://your-docusaurus-test-site.com/blog/tags/nginx" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.98f40e55.css">
<link rel="preload" href="/assets/js/runtime~main.a836243c.js" as="script">
<link rel="preload" href="/assets/js/main.461d5cde.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_fMMA">跳到主要内容</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="zyw" class="themedImage_hgLV themedImage--light_SMpv"><img src="/img/logo.png" alt="zyw" class="themedImage_hgLV themedImage--dark_OMNt"></div><b class="navbar__title text--truncate">zyw</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/zywkuo" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_V349"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_p2uW colorModeToggle_vyvj"><button class="clean-btn toggleButton_rBxX toggleButtonDisabled_QXgF" type="button" disabled="" title="切换浅色/暗黑模式（当前为浅色模式）" aria-label="切换浅色/暗黑模式（当前为浅色模式）"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_hAzn"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wrwC"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_YGu7"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_XoXv"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_IqMX thin-scrollbar" aria-label="最近博文导航"><div class="sidebarItemTitle_vzLv margin-bottom--md">All</div><ul class="sidebarItemList_DKgC clean-list"><li class="sidebarItem_c_rE"><a class="sidebarItemLink_QNc4" href="/blog/2022/08/16/PAG">PAG</a></li><li class="sidebarItem_c_rE"><a class="sidebarItemLink_QNc4" href="/blog/2022/08/11/Hello Docusaurus">Hello Docusaurus</a></li><li class="sidebarItem_c_rE"><a class="sidebarItemLink_QNc4" href="/blog/2020/07/14/koa+mysql">koa+mysql</a></li><li class="sidebarItem_c_rE"><a class="sidebarItemLink_QNc4" href="/blog/2019/12/11/qs">qs 序列化数据使用</a></li><li class="sidebarItem_c_rE"><a class="sidebarItemLink_QNc4" href="/blog/2019/8/13/DockerNginx">Docker离线安装Nginx镜像</a></li><li class="sidebarItem_c_rE"><a class="sidebarItemLink_QNc4" href="/blog/2019/8/12/LinuxDocker">Linux离线安装Docker</a></li><li class="sidebarItem_c_rE"><a class="sidebarItemLink_QNc4" href="/blog/2019/5/20/Jenkins">Jenkins + publish over ssh 插件进行web前端自动化打包和部署</a></li><li class="sidebarItem_c_rE"><a class="sidebarItemLink_QNc4" href="/blog/2019/3/12/proxy">双向绑定</a></li><li class="sidebarItem_c_rE"><a class="sidebarItemLink_QNc4" href="/blog/2019/3/4/inherit">闭包与继承</a></li><li class="sidebarItem_c_rE"><a class="sidebarItemLink_QNc4" href="/blog/2019/2/25/typeof">判断数据类型</a></li><li class="sidebarItem_c_rE"><a class="sidebarItemLink_QNc4" href="/blog/2018/12/26/toBlob">blob兼容性问题</a></li><li class="sidebarItem_c_rE"><a class="sidebarItemLink_QNc4" href="/blog/2018/12/11/imguploadpro">单图片上传pro(带压缩版)</a></li><li class="sidebarItem_c_rE"><a class="sidebarItemLink_QNc4" href="/blog/2018/12/03/IntersectionObserver">IntersectionObserver API</a></li><li class="sidebarItem_c_rE"><a class="sidebarItemLink_QNc4" href="/blog/2018/11/30/flutter">flutter Android Studio配置错误</a></li><li class="sidebarItem_c_rE"><a class="sidebarItemLink_QNc4" href="/blog/2018/11/28/imgupload">单图片上传</a></li><li class="sidebarItem_c_rE"><a class="sidebarItemLink_QNc4" href="/blog/2018/11/16/radioCheckbox">radio、checkbox 自定义样式</a></li><li class="sidebarItem_c_rE"><a class="sidebarItemLink_QNc4" href="/blog/2018/10/19/cssstudy">var() and mask</a></li><li class="sidebarItem_c_rE"><a class="sidebarItemLink_QNc4" href="/blog/2018/10/17/grid">CSS 网格布局(Grid Layout)</a></li><li class="sidebarItem_c_rE"><a class="sidebarItemLink_QNc4" href="/blog/2018/09/25/proxy">前端跨域方案</a></li><li class="sidebarItem_c_rE"><a class="sidebarItemLink_QNc4" href="/blog/2018/09/03/vue-cli">vue-cli3 + ElementUI</a></li><li class="sidebarItem_c_rE"><a class="sidebarItemLink_QNc4" href="/blog/2018/08/23/扩展运算符">rest参数(...变量名)和扩展运算符(...)</a></li><li class="sidebarItem_c_rE"><a class="sidebarItemLink_QNc4" href="/blog/2018/08/21/sticky">position:sticky</a></li><li class="sidebarItem_c_rE"><a class="sidebarItemLink_QNc4" href="/blog/2018/08/10/distinct">js数组去重</a></li><li class="sidebarItem_c_rE"><a class="sidebarItemLink_QNc4" href="/blog/2018/08/07/focusWithin">:focus-within选择器</a></li><li class="sidebarItem_c_rE"><a class="sidebarItemLink_QNc4" href="/blog/2018/08/03/sql">sql语句学习</a></li><li class="sidebarItem_c_rE"><a class="sidebarItemLink_QNc4" href="/blog/2018/08/01/search">js模糊查询</a></li><li class="sidebarItem_c_rE"><a class="sidebarItemLink_QNc4" href="/blog/2018/07/26/vivo-error">vivo手机H5页面ERROR</a></li><li class="sidebarItem_c_rE"><a class="sidebarItemLink_QNc4" href="/blog/2018/07/11/ajax-error">AJAX error参数及状态码</a></li><li class="sidebarItem_c_rE"><a class="sidebarItemLink_QNc4" href="/blog/2018/07/10/stopPropagation">event.stopPropagation()、event.stopPropagation()、 return false 理解与兼容</a></li><li class="sidebarItem_c_rE"><a class="sidebarItemLink_QNc4" href="/blog/2018/07/09/timer">时间戳与时间获取</a></li><li class="sidebarItem_c_rE"><a class="sidebarItemLink_QNc4" href="/blog/2018/07/08/slice">slice、splice、split、join、substring、substr</a></li><li class="sidebarItem_c_rE"><a class="sidebarItemLink_QNc4" href="/blog/2018/07/07/append">append、appendto、prepend、prependto、after、before</a></li><li class="sidebarItem_c_rE"><a class="sidebarItemLink_QNc4" href="/blog/2018/06/28/hello-hexo">Hello Hexo</a></li><li class="sidebarItem_c_rE"><a class="sidebarItemLink_QNc4" href="/blog/2017/08/15/echarts+baidu">百度地图+echarts3</a></li><li class="sidebarItem_c_rE"><a class="sidebarItemLink_QNc4" href="/blog/2017/07/31/nth">css3选择器</a></li><li class="sidebarItem_c_rE"><a class="sidebarItemLink_QNc4" href="/blog/2017/07/06/css-calc">css calc()</a></li><li class="sidebarItem_c_rE"><a class="sidebarItemLink_QNc4" href="/blog/2017/07/05/css-variable">css变量</a></li><li class="sidebarItem_c_rE"><a class="sidebarItemLink_QNc4" href="/blog/2017/06/27/html-print">关于网页打印的一些问题</a></li><li class="sidebarItem_c_rE"><a class="sidebarItemLink_QNc4" href="/blog/2017/06/12/vertical-align">vertical-align</a></li><li class="sidebarItem_c_rE"><a class="sidebarItemLink_QNc4" href="/blog/2017/06/06/oo">面向对象（OO）</a></li><li class="sidebarItem_c_rE"><a class="sidebarItemLink_QNc4" href="/blog/2017/06/01/codepen">codepen</a></li><li class="sidebarItem_c_rE"><a class="sidebarItemLink_QNc4" href="/blog/2017/05/24/width+height">js和jq获取当前位置</a></li><li class="sidebarItem_c_rE"><a class="sidebarItemLink_QNc4" href="/blog/2017/05/16/github pages+jekyll">github pages+jekyll搭建博客(windows)</a></li><li class="sidebarItem_c_rE"><a class="sidebarItemLink_QNc4" href="/blog/2017/05/12/hello-zyw">Hello Zyw</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><header class="margin-bottom--xl"><h1>2 篇博文 含有标签「Nginx」</h1><a href="/blog/tags">查看所有标签</a></header><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_wN7V" itemprop="headline"><a itemprop="url" href="/blog/2019/8/13/DockerNginx">Docker离线安装Nginx镜像</a></h2><div class="container_gjsX margin-vert--md"><time datetime="2019-08-13T00:00:00.000Z" itemprop="datePublished">2019年8月13日</time> · <!-- -->阅读需 5 分钟</div></header><div class="markdown" itemprop="articleBody"><p>离线安装还Docker后，在离线安装一个Nginx镜像，实现的方法，首先要在有网的地方将nginx镜像导出，然后在复制到内网环境中安装。</p><h2 class="anchor anchorWithStickyNavbar_S_Xj" id="在有网环境中将镜像打包">在有网环境中将镜像打包<a class="hash-link" href="#在有网环境中将镜像打包" title="标题的直接链接">​</a></h2><ul><li>先去pull一个最新的nginx镜像</li></ul><div class="language-bash codeBlockContainer_Qaoa theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_tMVf"><pre tabindex="0" class="prism-code language-bash codeBlock_rVvX thin-scrollbar"><code class="codeBlockLines_C0t5"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> pull nginx</span><br></span></code></pre><div class="buttonGroup_gaD6"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_HIIc" aria-hidden="true"><svg class="copyButtonIcon_Lfrq" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_beA7" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>然后将镜像导出</li></ul><div class="language-bash codeBlockContainer_Qaoa theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_tMVf"><pre tabindex="0" class="prism-code language-bash codeBlock_rVvX thin-scrollbar"><code class="codeBlockLines_C0t5"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> save e445ab08b2be -o /Users/zhouyanwei/Desktop/nginx.tar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              镜像的ID         保存的本地目录+文件名.tar</span><br></span></code></pre><div class="buttonGroup_gaD6"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_HIIc" aria-hidden="true"><svg class="copyButtonIcon_Lfrq" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_beA7" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>然后在本地会有生成一个打包好nginx.tar文件（或者上面自定义的名字）。</li></ul><h2 class="anchor anchorWithStickyNavbar_S_Xj" id="在专网环境中安装">在专网环境中安装<a class="hash-link" href="#在专网环境中安装" title="标题的直接链接">​</a></h2><ul><li>把这个压缩包放到内网中执行</li></ul><div class="language-bash codeBlockContainer_Qaoa theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_tMVf"><pre tabindex="0" class="prism-code language-bash codeBlock_rVvX thin-scrollbar"><code class="codeBlockLines_C0t5"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> load -i nginx.tar</span><br></span></code></pre><div class="buttonGroup_gaD6"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_HIIc" aria-hidden="true"><svg class="copyButtonIcon_Lfrq" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_beA7" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>然后docker images 看一下当前的镜像</li></ul><p><img loading="lazy" alt="1" src="/assets/images/1-8ce6560dcedbdf5a8f667382e78dbbc9.png" width="1228" height="114" class="img_bW2R"></p><ul><li><p>此时 REPOSITORY 和 TAG 都为none</p></li><li><p>在重新标记下标记一下就好了</p></li></ul><div class="language-bash codeBlockContainer_Qaoa theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_tMVf"><pre tabindex="0" class="prism-code language-bash codeBlock_rVvX thin-scrollbar"><code class="codeBlockLines_C0t5"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> tag e445ab08b2be nginx:latest</span><br></span></code></pre><div class="buttonGroup_gaD6"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_HIIc" aria-hidden="true"><svg class="copyButtonIcon_Lfrq" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_beA7" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>然后docker images 看一下当前的镜像</li></ul><p><img loading="lazy" alt="2" src="/assets/images/2-5f4f440daf62999214dbc8ab137a0189.png" width="1206" height="112" class="img_bW2R"></p><h2 class="anchor anchorWithStickyNavbar_S_Xj" id="启动一个ngixn容器">启动一个ngixn容器<a class="hash-link" href="#启动一个ngixn容器" title="标题的直接链接">​</a></h2><div class="language-bash codeBlockContainer_Qaoa theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_tMVf"><pre tabindex="0" class="prism-code language-bash codeBlock_rVvX thin-scrollbar"><code class="codeBlockLines_C0t5"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> run --name nginx -d -p </span><span class="token number" style="color:#36acaa">8090</span><span class="token plain">:80 nginx</span><br></span></code></pre><div class="buttonGroup_gaD6"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_HIIc" aria-hidden="true"><svg class="copyButtonIcon_Lfrq" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_beA7" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>第一个 nginx 容器名称。
-d设置容器在在后台一直运行。
-p 端口进行映射，将本地 8090 端口映射到容器内部的 80 端口。</p></blockquote><p>可能会遇见的错误</p><p><img loading="lazy" alt="3" src="/assets/images/3-04100998e327dc839fc516f4a81e4a51.png" width="2244" height="136" class="img_bW2R"></p><p>解决办法，是因为selinux开启导致docker run失败。</p><div class="language-bash codeBlockContainer_Qaoa theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_tMVf"><pre tabindex="0" class="prism-code language-bash codeBlock_rVvX thin-scrollbar"><code class="codeBlockLines_C0t5"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">vim</span><span class="token plain"> /etc/selinux/config</span><br></span></code></pre><div class="buttonGroup_gaD6"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_HIIc" aria-hidden="true"><svg class="copyButtonIcon_Lfrq" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_beA7" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><p>把 SELINUX项修改为disabled，然后重启CentOS系统。</p></li><li><p>重启后在执行启动命令就成功了。</p></li></ul><div class="language-bash codeBlockContainer_Qaoa theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_tMVf"><pre tabindex="0" class="prism-code language-bash codeBlock_rVvX thin-scrollbar"><code class="codeBlockLines_C0t5"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> start nginx</span><br></span></code></pre><div class="buttonGroup_gaD6"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_HIIc" aria-hidden="true"><svg class="copyButtonIcon_Lfrq" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_beA7" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>此时我们在浏览器中访问当前地址加端口号就能访问成功了。</li></ul><p><img loading="lazy" alt="4" src="/assets/images/4-a39004bb730ab9bb2d3b3918ce651989.png" width="3116" height="670" class="img_bW2R"></p><h2 class="anchor anchorWithStickyNavbar_S_Xj" id="部署-nginx">部署 nginx<a class="hash-link" href="#部署-nginx" title="标题的直接链接">​</a></h2><ul><li><p>单单是把nginx启动了并不是我们的最终目的，最起码我们有一个存放文件的地方，还要能修改conf文件，还要能看log吧。</p></li><li><p>首先创建ngixn目录，在目录下分别创建这三个目录进行存放。</p><blockquote><p>www: 目录将映射为 nginx 容器配置的虚拟目录。
logs: 目录将映射为 nginx 容器的日志目录。
conf: 目录里的配置文件将映射为 nginx 容器的配置文件。</p></blockquote></li></ul><div class="language-bash codeBlockContainer_Qaoa theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_tMVf"><pre tabindex="0" class="prism-code language-bash codeBlock_rVvX thin-scrollbar"><code class="codeBlockLines_C0t5"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">mkdir</span><span class="token plain"> -p ~/nginx/www ~/nginx/logs ~/nginx/conf</span><br></span></code></pre><div class="buttonGroup_gaD6"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_HIIc" aria-hidden="true"><svg class="copyButtonIcon_Lfrq" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_beA7" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>此时会在root文件夹下创建nginx文件夹，下面有三个文件夹。其他账户登录要去home文件夹下当前登录的用户文件夹下查找。</p></blockquote><ul><li>然后我们将当前ngixn默认的配置文件拷贝到我没呢新建的nginx/conf文件夹下。</li></ul><div class="language-bash codeBlockContainer_Qaoa theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_tMVf"><pre tabindex="0" class="prism-code language-bash codeBlock_rVvX thin-scrollbar"><code class="codeBlockLines_C0t5"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">cp</span><span class="token plain"> 01d9251b8255:/etc/nginx/nginx.conf ~/nginx/conf/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            容器id,可使用 </span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">ps</span><span class="token plain"> 查看</span><br></span></code></pre><div class="buttonGroup_gaD6"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_HIIc" aria-hidden="true"><svg class="copyButtonIcon_Lfrq" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_beA7" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>在重新部署nginx</li></ul><div class="language-bash codeBlockContainer_Qaoa theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_tMVf"><pre tabindex="0" class="prism-code language-bash codeBlock_rVvX thin-scrollbar"><code class="codeBlockLines_C0t5"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> run -d -p </span><span class="token number" style="color:#36acaa">80</span><span class="token plain">:80 --name nginxpro -v ~/nginx/www:/usr/share/nginx/html -v ~/nginx/conf/nginx.conf:/etc/nginx/nginx.conf -v ~/nginx/logs:/var/log/nginx nginx</span><br></span></code></pre><div class="buttonGroup_gaD6"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_HIIc" aria-hidden="true"><svg class="copyButtonIcon_Lfrq" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_beA7" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>-p 80:80： 将容器的 80 端口映射到主机的 80 端口。
--name nginxpro：将容器命名为 nginxpro。
-v ~/nginx/www:/usr/share/nginx/html：将我们自己创建的 www 目录挂载到容器的 /usr/share/nginx/html。
-v ~/nginx/conf/nginx.conf:/etc/nginx/nginx.conf：将我们自己创建的 nginx.conf 挂载到容器的 /etc/nginx/nginx.conf。
-v ~/nginx/logs:/var/log/nginx：将我们自己创建的 logs 挂载到容器的 /var/log/nginx。</p></blockquote><ul><li>然后我们进www文件目录创建一个index.html。</li></ul><div class="language-bash codeBlockContainer_Qaoa theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_tMVf"><pre tabindex="0" class="prism-code language-bash codeBlock_rVvX thin-scrollbar"><code class="codeBlockLines_C0t5"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">vim</span><span class="token plain"> ~/nginx/www/index.html</span><br></span></code></pre><div class="buttonGroup_gaD6"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_HIIc" aria-hidden="true"><svg class="copyButtonIcon_Lfrq" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_beA7" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" alt="5" src="/assets/images/5-1672923082779cdb271fde7823f4c0bc.png" width="1456" height="384" class="img_bW2R"></p><blockquote><p>12 月 2 日更新。
遇到的问题 如何添加代理</p></blockquote><p>docker中的nginx配置文件不单只是一个nginx.conf</p><p>先执行命令进nginx交互模式里看一下nginx的结构</p><p><img loading="lazy" alt="6" src="/assets/images/6-74aa20ad2bd571e35b406aeaeca0537d.png" width="1598" height="396" class="img_bW2R"></p><p>要把自己创建的目录和容器对应上才可以。</p><p><img loading="lazy" alt="6" src="/assets/images/7-0f393cf4364b0eeff3ae781d294c9143.png" width="646" height="374" class="img_bW2R"></p><p>所以还需要重新部署ngixn</p><div class="language-bash codeBlockContainer_Qaoa theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_tMVf"><pre tabindex="0" class="prism-code language-bash codeBlock_rVvX thin-scrollbar"><code class="codeBlockLines_C0t5"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> run -d -p </span><span class="token number" style="color:#36acaa">80</span><span class="token plain">:80 --name nginx </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -v ~/nginx/www:/usr/share/nginx/html </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -v ~/nginx/nginx.conf:/etc/nginx/nginx.conf </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -v ~/nginx/conf.d:/etc/nginx/conf.d </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -v ~/nginx/logs:/var/log/nginx nginx</span><br></span></code></pre><div class="buttonGroup_gaD6"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_HIIc" aria-hidden="true"><svg class="copyButtonIcon_Lfrq" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_beA7" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>在default.conf重设置代理就可以生效了。</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>标签：</b><ul class="tags_L65u padding--none margin-left--sm"><li class="tag_XSvz"><a class="tag_En7c tagRegular_wn69" href="/blog/tags/docker">Docker</a></li><li class="tag_XSvz"><a class="tag_En7c tagRegular_wn69" href="/blog/tags/nginx">Nginx</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_wN7V" itemprop="headline"><a itemprop="url" href="/blog/2018/09/25/proxy">前端跨域方案</a></h2><div class="container_gjsX margin-vert--md"><time datetime="2018-09-25T00:00:00.000Z" itemprop="datePublished">2018年9月25日</time> · <!-- -->阅读需 2 分钟</div></header><div class="markdown" itemprop="articleBody"><p>做了一份关于跨域的ppt,主要讲解了，使用vue-cli、nginx、node.js进行跨域处理。欢迎下载观看。</p><p><a target="_blank" href="/assets/files/proxy-321296fde307def4387f1fe9f9e8fd0b.pptx">PPT请点击这里下载</a></p><p>下面附上几张照片，node.js跨域源码在下面。</p><p><img loading="lazy" src="/assets/images/proxy1-e617d4bfa3e9612cf87fb73ea9befeda.png" width="2838" height="1414" class="img_bW2R">
<img loading="lazy" src="/assets/images/proxy2-da353710c917be337b2ec69df2484cbf.png" width="2914" height="1380" class="img_bW2R">
<img loading="lazy" src="/assets/images/proxy3-e5b363681855a7ed50f0d2d7c4a3d936.png" width="2786" height="1646" class="img_bW2R">
<img loading="lazy" src="/assets/images/proxy4-4e21a55d03d2bcaa9997b972a8c2afc0.png" width="2982" height="1730" class="img_bW2R"></p><p>proxy.js</p><div class="language-bash codeBlockContainer_Qaoa theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_tMVf"><pre tabindex="0" class="prism-code language-bash codeBlock_rVvX thin-scrollbar"><code class="codeBlockLines_C0t5"><span class="token-line" style="color:#393A34"><span class="token plain">var PORT </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3000</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">var http </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;http&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">var </span><span class="token assign-left variable" style="color:#36acaa">url</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;url&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">var </span><span class="token assign-left variable" style="color:#36acaa">fs</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;fs&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">var </span><span class="token assign-left variable" style="color:#36acaa">mine</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;./mime&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">.types</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">var </span><span class="token assign-left variable" style="color:#36acaa">path</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;path&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">var httpProxy </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;http-proxy&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">var proxy </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> httpProxy.createProxyServer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    target: </span><span class="token string" style="color:#e3116c">&#x27;http://192.168.2.18:8080/&#x27;</span><span class="token plain">,   //接口地址</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 下面的设置用于https</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // ssl: </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //     key: fs.readFileSync</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;server_decrypt.key&#x27;</span><span class="token plain">, </span><span class="token string" style="color:#e3116c">&#x27;utf8&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //     cert: fs.readFileSync</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;server.crt&#x27;</span><span class="token plain">, </span><span class="token string" style="color:#e3116c">&#x27;utf8&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // secure: </span><span class="token boolean" style="color:#36acaa">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">proxy.on</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;error&#x27;</span><span class="token plain">, function</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">err, req, res</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    res.writeHead</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">500</span><span class="token plain">, </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&#x27;content-type&#x27;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;text/plain&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    console.log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    res.end</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Something went wrong. And we are reporting a custom error message.&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">var server </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> http.createServer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">function </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">request, response</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    var pathname </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> url.parse</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">request.url</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">.pathname</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //var realPath </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> path.join</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;main-pages&quot;</span><span class="token plain">, pathname</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> // 指定根目录</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    var realPath </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> path.join</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;./&quot;</span><span class="token plain">, pathname</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    console.log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">pathname</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    console.log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">realPath</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    var ext </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> path.extname</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">realPath</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ext </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> ext ? ext.slice</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;unknown&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //判断如果是接口访问，则通过proxy转发</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">pathname.indexOf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;meis&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        proxy.web</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">request, response</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token builtin class-name">return</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fs.exists</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">realPath, </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">exists</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">!</span><span class="token plain">exists</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            response.writeHead</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">404</span><span class="token plain">, </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token string" style="color:#e3116c">&#x27;Content-Type&#x27;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;text/plain&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            response.write</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;This request URL &quot;</span><span class="token plain"> + pathname + </span><span class="token string" style="color:#e3116c">&quot; was not found on this server.&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            response.end</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            fs.readFile</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">realPath, </span><span class="token string" style="color:#e3116c">&quot;binary&quot;</span><span class="token plain">, </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">err, </span><span class="token function" style="color:#d73a49">file</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    response.writeHead</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">500</span><span class="token plain">, </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        </span><span class="token string" style="color:#e3116c">&#x27;Content-Type&#x27;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;text/plain&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    response.end</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    var contentType </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> mine</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">ext</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;text/plain&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    response.writeHead</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">200</span><span class="token plain">, </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        </span><span class="token string" style="color:#e3116c">&#x27;Content-Type&#x27;</span><span class="token builtin class-name">:</span><span class="token plain"> contentType</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    response.write</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">file, </span><span class="token string" style="color:#e3116c">&quot;binary&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    response.end</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">server.listen</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">PORT</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">console.log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Server runing at port: &quot;</span><span class="token plain"> + PORT + </span><span class="token string" style="color:#e3116c">&quot;.&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_gaD6"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_HIIc" aria-hidden="true"><svg class="copyButtonIcon_Lfrq" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_beA7" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>mime.js</p><div class="language-bash codeBlockContainer_Qaoa theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_tMVf"><pre tabindex="0" class="prism-code language-bash codeBlock_rVvX thin-scrollbar"><code class="codeBlockLines_C0t5"><span class="token-line" style="color:#393A34"><span class="token plain">exports.types </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;css&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;text/css&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;gif&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;image/gif&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;html&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;text/html&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;ico&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;image/x-icon&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;jpeg&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;image/jpeg&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;jpg&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;image/jpeg&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;js&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;text/javascript&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;json&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;application/json&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;pdf&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;application/pdf&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;png&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;image/png&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;svg&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;image/svg+xml&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;swf&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;application/x-shockwave-flash&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;tiff&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;image/tiff&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;txt&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;text/plain&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;wav&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;audio/x-wav&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;wma&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;audio/x-ms-wma&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;wmv&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;video/x-ms-wmv&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;xml&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;text/xml&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;woff&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;application/x-woff&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;woff2&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;application/x-woff2&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;tff&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;application/x-font-truetype&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;otf&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;application/x-font-opentype&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;eot&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;application/vnd.ms-fontobject&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_gaD6"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_HIIc" aria-hidden="true"><svg class="copyButtonIcon_Lfrq" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_beA7" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="row docusaurus-mt-lg"><div class="col"><b>标签：</b><ul class="tags_L65u padding--none margin-left--sm"><li class="tag_XSvz"><a class="tag_En7c tagRegular_wn69" href="/blog/tags/vue">vue</a></li><li class="tag_XSvz"><a class="tag_En7c tagRegular_wn69" href="/blog/tags/node-js">node.js</a></li><li class="tag_XSvz"><a class="tag_En7c tagRegular_wn69" href="/blog/tags/nginx">nginx</a></li></ul></div></footer></article><nav class="pagination-nav" aria-label="博文列表分页导航"></nav></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://developer.mozilla.org/zh-CN/" target="_blank" rel="noopener noreferrer" class="footer__link-item">MDN<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_V349"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/zywkuo" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_V349"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.a836243c.js"></script>
<script src="/assets/js/main.461d5cde.js"></script>
</body>
</html>